name: CI Pipeline

# Run on pushes to main and on pull requests targeting main
on:
   push:
      branches: [main]
   pull_request:
      branches: [main]

jobs:
   code-quality:
      name: Code Quality & Build
      runs-on: ubuntu-latest

      steps:
         # Checkout code from repository
         - name: Checkout code
           uses: actions/checkout@v4

         # Setup Node.js environment
         - name: Setup Node.js
           uses: actions/setup-node@v4
           with:
              node-version: "24"
              cache: "npm"

         - name: Install dependencies
           run: npm ci

         - name: Run ESLint
           run: npm run lint

         - name: Check Prettier formatting
           run: npm run format:check

         - name: TypeScript type check
           run: npx tsc --noEmit

         - name: Build project
           run: npm run build

         - name: Display build size
           run: |
              echo "ðŸ“¦ Build completed successfully!"
              echo "Build size:"
              du -sh dist
              echo ""
              echo "Assets:"
              du -sh dist/assets/* | sort -h
